function log_notif_reception(t){fetch("/1-on-1/push-notif/received/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({status_code:t})}).then(function(t){if(!t.ok)throw new Error("Bad status code from server.")})}self.addEventListener("fetch",function(t){}),self.addEventListener("push",function(t){var i=t.data.json();log_notif_reception("1");const e=self.registration.showNotification(i.title,{body:i.body,icon:"/static/img/notification.svg",badge:"/static/img/notification.svg",image:"/static/img/og_image.svg",vibrate:[500,110,500,110,450,110,200,110,170,40,450,110,200,110,170,40,500],tag:i.tag,renotify:!0,silent:!1,requireInteraction:!0,timestamp:i.time});t.waitUntil(e)}),self.addEventListener("notificationclick",function(t){t.notification.close();const i=new URL("/1-on-1/friends/",self.location.origin).href,e=clients.matchAll({type:"window",includeUncontrolled:!0}).then(t=>{let e=null;for(let n=0;n<t.length;n++){const o=t[n];if(o.url===i){e=o;break}}return e?(log_notif_reception("2"),e.focus()):(log_notif_reception("3"),clients.openWindow(i))});t.waitUntil(e)});