{% extends "base.html" %}
{% load comments %}
{% load bootstrap_pagination %}
{% load urlize_target_blank %}
{% block content %}
{% if is_paginated %}
<ol start="{{ page_obj.start_index }}">
{% else %}
<ol>
{% endif %}
{% for link in object_list %}
<form method="POST" action="{% url 'vote' %}" class="vote_form">
	{% csrf_token %}
	<li> 
	<input type="hidden" id="id_link" name="link" class="hidden_id" value="{{ link.pk }}">
	<input type="hidden" id="id_voter" name="voter" class="hidden_id" value="{{ user.pk }}">
	<input type="hidden" id="id_value" name="value" class="hidden_id" value="1">		
	<!--{{ link.rank_score }}-->
	<a href="{% url 'profile' slug=link.submitter %}" class="bigger">{{ link.submitter }}:</a>
		<span style="color:black; font-size:121%;">{{ link.description|urlize_target_blank:25 }}</span>
		 
	{% if link.url %}
		<b><span style="font-size:121%; font-weight:100;"><a href="{{ link.url }}" target="_blank">{{ link.url|urlize_target_blank:25 }}</a></span></b>
	{% endif %} 
	<p style="margin-top:0.25em">
	<a class="countofvotes">{% if link.votes %}
			{% if link.votes == 1 %}
				{{ "1 vote" }}
			{% else %}
				{{ link.votes }}{{ "votes" }}
		{% endif %}
	{% else %}
		{{ "0 votes" }}
	{% endif %}	 
	</a>
	{% if not user.is_authenticated %}
		<a href="{% url 'registration_register' %}" class="fakebutton" style="background-color:#F6F6F6">vote</a>
	{% elif link.pk not in voted %}	
		<input class="voting" type="submit" id="id_valup" name="val" style="color:green;background-color:#F6F6F6;font-weight:bold" value="↑">
		<input  class="voting" type="submit" id="id_valdown" name="val" style="color:red;background-color:#F6F6F6;font-weight:bold" value="↓">
	{% else %}
		<button style="background-color:#F6F6F6">unvote</button>
	{% endif %}
	<!--<input class="smsbutton" type="submit" name="sms" style="color:blue;background-color:#F6F6F6" value="sms">-->
	<!--<button>sms</button>-->
	<a href="sms:+92345?body={{ link.description|urlencode }}" style="color:blue;background-color:#FFA500">SMS</a>
	{% get_comment_count for link as comment_count %}
	{% if comment_count %}
		<a href="{% url 'link_detail' pk=link.pk %}">
		{{ comment_count }} comment{{ comment_count|pluralize}}</a>
		</a>
	{% else %}
		<a href="{% url 'link_detail' pk=link.pk %}">comment karien</a>
	{% endif %}
	</li>
</form>
{% endfor %}
</ol>
{% endblock %}

{% block pagination %}

 {% bootstrap_paginate page_obj range=10 show_prev_next="false" show_first_last="true" %}
{% endblock %}


